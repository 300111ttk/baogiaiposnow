<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hệ thống Báo Giá POS (Final Table Fix)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <style>
        body { font-family: 'Roboto', sans-serif; background-color: #f8fafc; padding-bottom: 120px; }
        .table-header { background-color: #eff6ff; color: #1e3a8a; }
        .tab-btn { padding: 12px 24px; font-weight: 600; color: #64748b; border-bottom: 3px solid transparent; transition: all 0.3s; white-space: nowrap; }
        .tab-btn:hover { color: #1e40af; background-color: #f1f5f9; }
        .tab-btn.active { color: #1e40af; border-bottom-color: #1e40af; background-color: #eff6ff; }
        .section-header { text-align: center; font-size: 1.2rem; font-weight: 700; text-transform: uppercase; padding: 15px; margin-top: 20px; }
        .text-blue-title { color: #1e3a8a; } 
        .text-orange-title { color: #c2410c; }
        input[type="checkbox"] { width: 24px; height: 24px; cursor: pointer; accent-color: #1e40af; }

        /* Giao diện Mobile cho WEB */
        @media (max-width: 768px) {
            thead { display: none; }
            tr.section-row td { display: block; width: 100%; text-align: center; font-weight: bold; padding: 10px; }
            tr:not(.section-row) { display: flex; flex-direction: column; background: white; margin-bottom: 12px; border-radius: 8px; border: 1px solid #e2e8f0; padding: 16px; position: relative; }
            td { display: block; padding: 4px 0; border: none; }
            td:nth-child(1) { position: absolute; top: 16px; right: 16px; z-index: 10; }
            td:nth-child(2) { font-size: 1.1rem; padding-right: 40px; font-weight: 700; color: #1e3a8a; }
            td:nth-child(3) { color: #475569; margin-bottom: 8px; }
            td:nth-child(4) { border-top: 1px dashed #cbd5e1; padding-top: 8px; text-align: right; font-weight: 700; color: #1e40af; font-size: 1.2rem; }
            td:nth-child(4)::before { content: "Giá: "; font-weight: normal; color: #64748b; font-size: 0.9rem; }
            .selected-row { background-color: #f0fdf4 !important; border: 1px solid #22c55e !important; }
            .tab-container { overflow-x: auto; -webkit-overflow-scrolling: touch; }
        }
        @media (min-width: 769px) { .selected-row { background-color: #f0fdf4 !important; border-left: 4px solid #22c55e; } }
        .sticky-footer { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.98); border-top: 1px solid #e5e7eb; box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.05); z-index: 50; }
        
        /* Modal Styles */
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); backdrop-filter: blur(4px); }
        .modal-content { background-color: white; margin: 10% auto; padding: 20px; border-radius: 12px; width: 90%; max-width: 600px; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body class="text-slate-800">

    <div class="max-w-5xl mx-auto p-2 md:p-8">
        <header class="text-center mb-6">
            <h1 class="text-2xl md:text-4xl font-bold text-blue-900 uppercase">Hệ thống Báo Giá POS</h1>
            <p class="text-gray-500 mt-1 text-sm">Chọn loại hình kinh doanh & Tùy chọn thêm</p>
        </header>

        <div class="bg-white shadow-sm border-b border-gray-200 mb-6 tab-container sticky top-0 z-40">
            <nav class="flex md:justify-center min-w-max px-4">
                <button onclick="openTab('nhahang')" class="tab-btn active" id="btn-nhahang"><i class="fa-solid fa-utensils mr-2"></i>Nhà hàng</button>
                <button onclick="openTab('fastfood')" class="tab-btn" id="btn-fastfood"><i class="fa-solid fa-burger mr-2"></i>Fastfood</button>
                <button onclick="openTab('nail')" class="tab-btn" id="btn-nail"><i class="fa-solid fa-hand-sparkles mr-2"></i>Tiệm Nail</button>
                <button onclick="openTab('tuychon')" class="tab-btn text-orange-600" id="btn-tuychon"><i class="fa-solid fa-plus-circle mr-2"></i>Tùy chọn thêm</button>
            </nav>
        </div>

        <div class="md:bg-white md:rounded-lg md:shadow md:border md:border-gray-200 overflow-hidden min-h-[400px]">
            <table class="w-full text-left border-collapse">
                <thead class="table-header text-sm font-bold uppercase tracking-wider border-b-2 border-blue-200">
                    <tr>
                        <th class="p-4 text-center w-16">Chọn</th>
                        <th class="p-4 w-1/4">Thiết bị / Dịch vụ</th>
                        <th class="p-4">Thông tin chi tiết</th>
                        <th class="p-4 text-right w-36">Giá bán (€)</th>
                    </tr>
                </thead>

                <tbody id="tab-nhahang" class="tab-content md:divide-y md:divide-gray-100 text-sm md:text-base transition-opacity duration-300">
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="1a. PosNow T2s" data-price="2800"></td><td class="p-4 font-bold text-blue-800">1a. PosNow <span class="text-red-500">T2s</span></td><td class="p-4 text-gray-600">1 màn hình 15.6"</td><td class="p-4 text-right font-bold">2.800 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="1a. PosNow T2s (Dual)" data-price="3000"></td><td class="p-4 font-bold text-blue-800">1a. PosNow <span class="text-red-500">T2s</span> (Dual)</td><td class="p-4 text-gray-600">2 màn hình 15.6" + màn phụ 10.1"</td><td class="p-4 text-right font-bold">3.000 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="1b. PosNow T2s Lite" data-price="2800"></td><td class="p-4 font-bold text-blue-800">1b. PosNow <span class="text-red-500">T2s Lite</span></td><td class="p-4 text-gray-600">1 màn hình 15.6"</td><td class="p-4 text-right font-bold">2.800 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="1b. PosNow T2s Lite (Dual)" data-price="3000"></td><td class="p-4 font-bold text-blue-800">1b. PosNow <span class="text-red-500">T2s Lite</span> (Dual)</td><td class="p-4 text-gray-600">2 màn hình 15.6" + màn phụ 10.1"</td><td class="p-4 text-right font-bold">3.000 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="2. Gói cài đặt hệ thống" data-price="250"></td><td class="p-4 font-bold text-blue-800">2. Gói cài đặt hệ thống</td><td class="p-4 text-gray-600">Triển khai server, nhập menu, logo, TSE...</td><td class="p-4 text-right font-bold">250 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="3. TSE Cloud 1 năm" data-price="120"></td><td class="p-4 font-bold text-blue-800">3. TSE Cloud</td><td class="p-4 text-gray-600">TSE - Cloud - 1 năm</td><td class="p-4 text-right font-bold">120 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="3. TSE USB 5 năm" data-price="500"></td><td class="p-4 font-bold text-blue-800">3. TSE USB</td><td class="p-4 text-gray-600">TSE - USB - 5 năm</td><td class="p-4 text-right font-bold">500 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="4a. Máy in bon" data-price="350"></td><td class="p-4 font-bold text-blue-800">4a. Máy in bon</td><td class="p-4 text-gray-600">Máy in hóa đơn 80mm autocut (Dây/Không dây)</td><td class="p-4 text-right font-bold">350 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="4a. Máy in nhãn" data-price="400"></td><td class="p-4 font-bold text-blue-800">4a. Máy in nhãn</td><td class="p-4 text-gray-600">Máy in tem nhãn dán</td><td class="p-4 text-right font-bold">400 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="5. Modem wifi" data-price="250"></td><td class="p-4 font-bold text-blue-800">5. Modem wifi</td><td class="p-4 text-gray-600">Router Wifi TPLink Archer C1200</td><td class="p-4 text-right font-bold">250 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="6. Bộ Switch 5" data-price="150"></td><td class="p-4 font-bold text-blue-800">6. Bộ Switch 5</td><td class="p-4 text-gray-600">Tp-Link 5-Port PoE + Switch</td><td class="p-4 text-right font-bold">150 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="7. Ổn định sóng Ubiquity" data-price="350"></td><td class="p-4 font-bold text-blue-800">7. Ổn định sóng Ubiquity</td><td class="p-4 text-gray-600">Ubiquiti UniFi AP AC Lite/PRO</td><td class="p-4 text-right font-bold">350 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="8a. PosNow V2 Pro" data-price="1200"></td><td class="p-4 font-bold text-blue-800">8a. PosNow <span class="text-red-500">V2 Pro</span></td><td class="p-4 text-gray-600">Android 7.1, 2GB RAM + 16GB ROM</td><td class="p-4 text-right font-bold">1.200 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="Phụ kiện: Đế sạc V2Pro" data-price="100"></td><td class="p-4 font-bold text-gray-500 italic">↳ Phụ kiện</td><td class="p-4 text-gray-600">Đế sạc điện nhanh V2PRO</td><td class="p-4 text-right font-bold">100 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="8b. PosNow L2s Pro" data-price="1500"></td><td class="p-4 font-bold text-blue-800">8b. PosNow <span class="text-red-500">L2s Pro</span></td><td class="p-4 text-gray-600">Mobiles All-In-One Touchterminal</td><td class="p-4 text-right font-bold">1.500 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="Phụ kiện: Pin L2s" data-price="70"></td><td class="p-4 font-bold text-gray-500 italic">↳ Phụ kiện</td><td class="p-4 text-gray-600">Pin L2s</td><td class="p-4 text-right font-bold">70 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="Phụ kiện: Vỏ bảo vệ L2s" data-price="50"></td><td class="p-4 font-bold text-gray-500 italic">↳ Phụ kiện</td><td class="p-4 text-gray-600">Vỏ bảo vệ</td><td class="p-4 text-right font-bold">50 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="Phụ kiện: Đế sạc L2s Pro" data-price="350"></td><td class="p-4 font-bold text-gray-500 italic">↳ Phụ kiện</td><td class="p-4 text-gray-600">Đế sạc điện nhanh L2s pro 4PIN</td><td class="p-4 text-right font-bold">350 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="Phụ kiện: Dây đeo L2s" data-price="20"></td><td class="p-4 font-bold text-gray-500 italic">↳ Phụ kiện</td><td class="p-4 text-gray-600">Dây đeo L2s/ L2s PRO</td><td class="p-4 text-right font-bold">20 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="8a. PosNow L3" data-price="1600"></td><td class="p-4 font-bold text-blue-800">8a. PosNow <span class="text-red-500">L3</span></td><td class="p-4 text-gray-600">Chống rơi, chống nước, pin khủng</td><td class="p-4 text-right font-bold">1.600 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="9. Lắp đặt, triển khai" data-price="500"></td><td class="p-4 font-bold text-blue-800">9. Lắp đặt, triển khai</td><td class="p-4 text-gray-600">Lắp đặt, đào tạo trực tiếp tại cửa hàng</td><td class="p-4 text-right font-bold">500 €</td></tr>
                </tbody>

                <tbody id="tab-fastfood" class="tab-content hidden md:divide-y md:divide-gray-100 text-sm md:text-base">
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 1a. PosNow T2s" data-price="2800"></td><td class="p-4 font-bold text-blue-800">1a. PosNow <span class="text-red-500">T2s</span></td><td class="p-4 text-gray-600">1 màn hình 15.6"</td><td class="p-4 text-right font-bold">2.800 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 1a. PosNow T2s (Dual)" data-price="3000"></td><td class="p-4 font-bold text-blue-800">1a. PosNow <span class="text-red-500">T2s</span> (Dual)</td><td class="p-4 text-gray-600">2 màn hình 15.6" + màn phụ 10.1"</td><td class="p-4 text-right font-bold">3.000 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 1b. PosNow T2s Lite" data-price="2800"></td><td class="p-4 font-bold text-blue-800">1b. PosNow <span class="text-red-500">T2s Lite</span></td><td class="p-4 text-gray-600">1 màn hình 15.6"</td><td class="p-4 text-right font-bold">2.800 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 1b. PosNow T2s Lite (Dual)" data-price="3000"></td><td class="p-4 font-bold text-blue-800">1b. PosNow <span class="text-red-500">T2s Lite</span> (Dual)</td><td class="p-4 text-gray-600">2 màn hình 15.6" + màn phụ 10.1"</td><td class="p-4 text-right font-bold">3.000 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 2. Gói cài đặt hệ thống" data-price="250"></td><td class="p-4 font-bold text-blue-800">2. Gói cài đặt hệ thống</td><td class="p-4 text-gray-600">Triển khai server, menu, logo, TSE...</td><td class="p-4 text-right font-bold">250 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 3. TSE Cloud 1 năm" data-price="120"></td><td class="p-4 font-bold text-blue-800">3. TSE Cloud</td><td class="p-4 text-gray-600">TSE - Cloud - 1 năm</td><td class="p-4 text-right font-bold">120 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 3. TSE USB 5 năm" data-price="500"></td><td class="p-4 font-bold text-blue-800">3. TSE USB</td><td class="p-4 text-gray-600">TSE - USB - 5 năm</td><td class="p-4 text-right font-bold">500 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 4a. Máy in bon" data-price="350"></td><td class="p-4 font-bold text-blue-800">4a. Máy in bon</td><td class="p-4 text-gray-600">Máy in hóa đơn 80mm autocut (Dây/Không dây)</td><td class="p-4 text-right font-bold">350 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 4a. Máy in nhãn" data-price="400"></td><td class="p-4 font-bold text-blue-800">4a. Máy in nhãn</td><td class="p-4 text-gray-600">Máy in tem nhãn dán</td><td class="p-4 text-right font-bold">400 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 5. Modem wifi" data-price="250"></td><td class="p-4 font-bold text-blue-800">5. Modem wifi</td><td class="p-4 text-gray-600">Router Wifi TPLink Archer C1200</td><td class="p-4 text-right font-bold">250 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 6. Bộ Switch 5" data-price="150"></td><td class="p-4 font-bold text-blue-800">6. Bộ Switch 5</td><td class="p-4 text-gray-600">Tp-Link 5-Port PoE + Switch</td><td class="p-4 text-right font-bold">150 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 7. Ổn định sóng Ubiquity" data-price="350"></td><td class="p-4 font-bold text-blue-800">7. Ổn định sóng Ubiquity</td><td class="p-4 text-gray-600">Ubiquiti UniFi AP AC Lite/PRO</td><td class="p-4 text-right font-bold">350 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[FF] 9. Lắp đặt, triển khai" data-price="500"></td><td class="p-4 font-bold text-blue-800">9. Lắp đặt, triển khai</td><td class="p-4 text-gray-600">Lắp đặt, đào tạo trực tiếp tại cửa hàng</td><td class="p-4 text-right font-bold">500 €</td></tr>
                </tbody>

                <tbody id="tab-nail" class="tab-content hidden md:divide-y md:divide-gray-100 text-sm md:text-base">
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[Nail] 1a. PosNow T2 mini" data-price="1200"></td><td class="p-4 font-bold text-blue-800">1a. PosNow <span class="text-red-500">T2 mini</span></td><td class="p-4 text-gray-600">Màn hình 11.6", RAM2G + ROM16G</td><td class="p-4 text-right font-bold">1.200 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[Nail] 1b. PosNow D3 mini" data-price="1000"></td><td class="p-4 font-bold text-blue-800">1b. PosNow <span class="text-red-500">D3 mini</span></td><td class="p-4 text-gray-600">Màn hình 10.1", RAM3G + ROM32G</td><td class="p-4 text-right font-bold">1.000 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[Nail] 2. Gói cài đặt hệ thống" data-price="250"></td><td class="p-4 font-bold text-blue-800">2. Gói cài đặt hệ thống</td><td class="p-4 text-gray-600">Triển khai server, menu, logo, TSE...</td><td class="p-4 text-right font-bold">250 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[Nail] 3. TSE Cloud 1 năm" data-price="120"></td><td class="p-4 font-bold text-blue-800">3. TSE Cloud</td><td class="p-4 text-gray-600">TSE - Cloud - 1 năm</td><td class="p-4 text-right font-bold">120 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="[Nail] 3. TSE USB 5 năm" data-price="500"></td><td class="p-4 font-bold text-blue-800">3. TSE USB</td><td class="p-4 text-gray-600">TSE - USB - 5 năm</td><td class="p-4 text-right font-bold">500 €</td></tr>
                </tbody>

                <tbody id="tab-tuychon" class="tab-content hidden md:divide-y md:divide-gray-100 text-sm md:text-base">
                    <tr class="section-row bg-white"><td colspan="4" class="p-4 text-center text-blue-title font-bold text-xl uppercase border-b-2 border-blue-100">Báo giá thiết bị</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="10. Hộp đựng tiền (TC)" data-price="150"></td><td class="p-4 font-bold text-blue-800">10. Hộp đựng tiền</td><td class="p-4 text-gray-600">TC 350 x 405 x 90mm</td><td class="p-4 text-right font-bold">150 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="10. Hộp đựng tiền (Sunmi)" data-price="200"></td><td class="p-4 font-bold text-blue-800">10. Hộp đựng tiền</td><td class="p-4 text-gray-600">Sunmi 317 x 332 x 72mm</td><td class="p-4 text-right font-bold">200 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="11. Màn hình bếp KDS" data-price="650"></td><td class="p-4 font-bold text-blue-800">11. Màn hình bếp KDS</td><td class="p-4 text-gray-600">D2s KDS - 15.6" Widescreen</td><td class="p-4 text-right font-bold">650 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="11. Chân đế treo KDS" data-price="190"></td><td class="p-4 font-bold text-blue-800">11. Chân đế treo</td><td class="p-4 text-gray-600">Chân đế treo màn hình</td><td class="p-4 text-right font-bold">190 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="12. App quản lý từ xa" data-price="120"></td><td class="p-4 font-bold text-blue-800">12. App quản lý từ xa</td><td class="p-4 text-gray-600">Quản lý nhân viên, doanh thu, chống gian lận</td><td class="p-4 text-right font-bold">120 € / năm</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="13. Sổ thu chi (Kassenbuch)" data-price="50"></td><td class="p-4 font-bold text-blue-800">13. Kassenbuch</td><td class="p-4 text-gray-600">Quản lý thu chi, xuất file thuế</td><td class="p-4 text-right font-bold">50 €</td></tr>

                    <tr class="section-row bg-white mt-4"><td colspan="4" class="p-4 text-center text-blue-title font-bold text-xl uppercase border-b-2 border-blue-100 pt-8">Báo giá dịch vụ</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="14. Website & Booking" data-price="1000"></td><td class="p-4 font-bold text-blue-800">14. Website & Booking</td><td class="p-4 text-gray-600">Website quảng bá & đặt lịch Online</td><td class="p-4 text-right font-bold">1.000 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="15. Web-Kasse (Tiêu chuẩn)" data-price="1500"></td><td class="p-4 font-bold text-blue-800">15. Web-Kasse Online</td><td class="p-4 text-gray-600">Bản tiêu chuẩn</td><td class="p-4 text-right font-bold">1.500 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="15. Web-Kasse (Cao cấp)" data-price="2000"></td><td class="p-4 font-bold text-blue-800">15. Web-Kasse Online</td><td class="p-4 text-gray-600">Bản cao cấp</td><td class="p-4 text-right font-bold">2.000 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="16. QR E-menu (Order)" data-price="2000"></td><td class="p-4 font-bold text-blue-800">16. QR E-menu</td><td class="p-4 text-gray-600">Khách tự gọi món (Order)</td><td class="p-4 text-right font-bold">2.000 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="16. QR E-menu (View)" data-price="50"></td><td class="p-4 font-bold text-blue-800">16. QR E-menu</td><td class="p-4 text-gray-600">Chỉ xem menu online</td><td class="p-4 text-right font-bold">50 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="17. Landing Page" data-price="50"></td><td class="p-4 font-bold text-blue-800">17. Landing Page</td><td class="p-4 text-gray-600">Quảng bá 1 sản phẩm</td><td class="p-4 text-right font-bold">50 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="18a. Marketing F&B" data-price="150"></td><td class="p-4 font-bold text-blue-800">18a. Marketing F&B</td><td class="p-4 text-gray-600">Gói trải nghiệm</td><td class="p-4 text-right font-bold">150 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="18a. Marketing F&B (Nâng cao)" data-price="300"></td><td class="p-4 font-bold text-blue-800">18a. Marketing F&B</td><td class="p-4 text-gray-600">Gói nâng cao</td><td class="p-4 text-right font-bold">300 €</td></tr>

                    <tr class="section-row bg-white mt-4"><td colspan="4" class="p-4 text-center text-orange-title font-bold text-xl uppercase border-b-2 border-orange-100 pt-8">Hỗ trợ sau khi mua hàng</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="19. Cài đặt lại Server" data-price="250"></td><td class="p-4 font-bold text-blue-800">19. Cài đặt Server</td><td class="p-4 text-gray-600">Cài mới toàn bộ hệ thống</td><td class="p-4 text-right font-bold">250 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="20. Làm lại menu" data-price="100"></td><td class="p-4 font-bold text-blue-800">20. Làm lại Menu</td><td class="p-4 text-gray-600">Làm nhanh 1-2 ngày</td><td class="p-4 text-right font-bold">100 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="20. Làm lại menu" data-price="50"></td><td class="p-4 font-bold text-blue-800">20. Làm lại Menu</td><td class="p-4 text-gray-600">Thời hạn 3-5 ngày</td><td class="p-4 text-right font-bold">50 €</td></tr>
                    <tr class="transition hover:bg-gray-50"><td class="p-4 text-center"><input type="checkbox" class="product-check" data-name="20. Thay Logo mới" data-price="50"></td><td class="p-4 font-bold text-blue-800">20. Thay Logo</td><td class="p-4 text-gray-600">Thay logo mới</td><td class="p-4 text-right font-bold">50 €</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="quickview-modal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center border-b pb-3 mb-4">
                <h3 class="text-xl font-bold text-blue-900 uppercase">Sản phẩm đã chọn</h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>
            <div id="modal-items-list" class="max-h-[60vh] overflow-y-auto mb-4">
                </div>
            <div class="border-t pt-4 flex justify-between items-center">
                <span class="font-bold text-lg">Tổng cộng:</span>
                <span id="modal-total" class="text-2xl font-black text-orange-600">0 €</span>
            </div>
            <button onclick="closeModal()" class="w-full mt-6 bg-blue-900 text-white py-3 rounded-lg font-bold">Đóng</button>
        </div>
    </div>

    <div class="sticky-footer p-3 md:p-4">
        <div class="max-w-5xl mx-auto flex justify-between items-center gap-2">
            <div class="flex flex-col">
                <span class="text-xs text-gray-500 uppercase font-bold">Tổng thanh toán:</span>
                <span class="text-2xl md:text-3xl font-black text-blue-900" id="total-price">0 €</span>
            </div>
            
            <div class="flex gap-2">
                <button onclick="showQuickView()" class="bg-blue-100 hover:bg-blue-200 text-blue-900 px-4 py-3 rounded-lg font-bold transition flex items-center gap-2 text-sm md:text-base border border-blue-200">
                    <i class="fa-solid fa-eye"></i>
                    <span class="hidden md:inline">Xem nhanh</span>
                </button>
                <button onclick="exportToPDF()" class="bg-red-600 hover:bg-red-700 text-white px-5 py-3 rounded-lg font-bold shadow-lg active:scale-95 transition flex items-center gap-2 text-sm md:text-base">
                    <i class="fa-solid fa-file-pdf"></i>
                    <span class="hidden md:inline">Xuất Báo Giá (PDF)</span>
                    <span class="md:hidden">Xuất PDF</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        function openTab(tabName) {
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.add('hidden'));
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            document.getElementById('tab-' + tabName).classList.remove('hidden');
            document.getElementById('btn-' + tabName).classList.add('active');
        }

        const checkboxes = document.querySelectorAll('.product-check');
        const totalPriceEl = document.getElementById('total-price');
        const formatMoney = (amount) => amount.toLocaleString('de-DE') + ' €';

        function calculateTotal() {
            let total = 0;
            checkboxes.forEach(cb => {
                const row = cb.closest('tr');
                if (cb.checked) {
                    total += parseInt(cb.getAttribute('data-price'));
                    row.classList.add('selected-row');
                } else {
                    row.classList.remove('selected-row');
                }
            });
            totalPriceEl.innerText = formatMoney(total);
        }
        checkboxes.forEach(cb => cb.addEventListener('change', calculateTotal));

        // === HÀM XEM NHANH BÁO GIÁ ===
        function showQuickView() {
            let total = 0;
            let html = '';
            let count = 0;

            checkboxes.forEach(cb => {
                if (cb.checked) {
                    count++;
                    const price = parseInt(cb.getAttribute('data-price'));
                    total += price;
                    html += `
                        <div class="flex justify-between items-center py-3 border-b border-gray-100">
                            <div class="flex flex-col">
                                <span class="font-bold text-blue-800 text-sm">${count}. ${cb.getAttribute('data-name')}</span>
                            </div>
                            <span class="font-bold text-gray-700">${formatMoney(price)}</span>
                        </div>
                    `;
                }
            });

            if (count === 0) {
                alert("Vui lòng chọn ít nhất một sản phẩm để xem!");
                return;
            }

            document.getElementById('modal-items-list').innerHTML = html;
            document.getElementById('modal-total').innerText = formatMoney(total);
            document.getElementById('quickview-modal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('quickview-modal').style.display = 'none';
        }

        // Đóng modal khi click ra ngoài
        window.onclick = function(event) {
            const modal = document.getElementById('quickview-modal');
            if (event.target == modal) {
                closeModal();
            }
        }

// === HÀM XUẤT PDF: SỬA LỖI TRANG TRẮNG & ÉP LÊN ĐỈNH TRANG ===
function exportToPDF() {
    let total = 0;
    let selectedItems = [];
    checkboxes.forEach(cb => {
        if (cb.checked) {
            selectedItems.push({
                name: cb.getAttribute('data-name'),
                price: parseInt(cb.getAttribute('data-price'))
            });
            total += parseInt(cb.getAttribute('data-price'));
        }
    });

    if(total === 0) {
        alert("Vui lòng chọn ít nhất một sản phẩm!");
        return;
    }

    const today = new Date().toLocaleDateString('vi-VN');
    
    let itemsHtml = '';
    selectedItems.forEach((item, index) => {
        itemsHtml += `
            <tr style="page-break-inside: avoid !important; border-bottom: 1px solid #e2e8f0;">
                <td style="padding: 10px 8px; text-align: center; border-left: 1px solid #e2e8f0; border-right: 1px solid #e2e8f0; font-size: 13px;">${index + 1}</td>
                <td style="padding: 10px 15px; text-align: left; border-right: 1px solid #e2e8f0; font-size: 13px;">${item.name}</td>
                <td style="padding: 10px 15px; text-align: right; font-weight: 600; border-right: 1px solid #e2e8f0; font-size: 13px;">${formatMoney(item.price)}</td>
            </tr>
        `;
    });

    // Tạo container ảo và ép CSS trực tiếp để không bị trắng
    const element = document.createElement('div');
    element.innerHTML = `
        <div style="width: 760px; padding: 20px 40px; background: white; color: #000;">
            <div style="text-align: center; margin-bottom: 30px;">
                <h1 style="color: #1e3a8a; font-size: 26px; margin: 0; font-weight: 800; text-transform: uppercase;">Bảng Báo Giá Thiết Bị POS</h1>
                <p style="color: #64748b; margin-top: 10px; font-style: italic; font-size: 14px;">Ngày tạo: ${today}</p>
                <div style="width: 100%; height: 2px; background: #1e3a8a; margin-top: 20px;"></div>
            </div>
            
            <table style="width: 100%; border-collapse: collapse; border: 1px solid #e2e8f0; page-break-inside: auto;">
                <thead>
                    <tr style="background-color: #eff6ff; color: #1e3a8a;">
                        <th style="padding: 12px 8px; border: 1px solid #cbd5e1; width: 50px; text-align: center;">STT</th>
                        <th style="padding: 12px 15px; border: 1px solid #cbd5e1; text-align: center;">Tên Sản Phẩm / Dịch Vụ</th>
                        <th style="padding: 12px 15px; border: 1px solid #cbd5e1; width: 150px; text-align: center;">Thành Tiền</th>
                    </tr>
                </thead>
                <tbody>
                    ${itemsHtml}
                </tbody>
            </table>

            <div style="margin-top: 30px; text-align: right; page-break-inside: avoid;">
                <p style="font-size: 16px; color: #64748b; margin: 0;">Tổng cộng:</p>
                <h2 style="font-size: 36px; color: #c2410c; margin: 5px 0; font-weight: 900;">${formatMoney(total)}</h2>
            </div>

            <div style="margin-top: 50px; text-align: center; font-size: 13px; color: #64748b; background: #f8fafc; padding: 30px; border-radius: 8px; page-break-inside: avoid;">
                <p>Cảm ơn quý khách đã quan tâm đến giải pháp của chúng tôi!</p>
                <p style="font-weight: 700; color: #1e3a8a; margin-top: 10px;">Hotline: 0123 456 789</p>
            </div>
        </div>
    `;

    // Cấu hình xuất PDF
    const opt = {
        margin: 0, 
        filename: `Bao_Gia_POS_${Date.now()}.pdf`,
        image: { type: 'jpeg', quality: 1 },
        html2canvas: { 
            scale: 2, 
            useCORS: true,
            logging: false,
            letterRendering: true,
            scrollY: 0
        },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
        pagebreak: { mode: ['legacy'] } 
    };

    // Thực hiện render với một chút delay để tránh trang trắng
    html2pdf().from(element).set(opt).toPdf().get('pdf').then(function (pdf) {
        // Có thể thêm xử lý số trang ở đây nếu cần
    }).save();
}
    </script>
</body>
</html>
